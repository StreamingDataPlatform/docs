<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.71">
<link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="Dell EMC Streaming Data Platform Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="Dell EMC Streaming Data Platform Blog Atom Feed"><title data-react-helmet="true">Pravega Streaming Service Wire Protocol | Dell EMC Streaming Data Platform</title><meta data-react-helmet="true" property="og:url" content="https://StreamingDataPlatform.github.io//docs/pravega/wire-protocol"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Pravega Streaming Service Wire Protocol | Dell EMC Streaming Data Platform"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://StreamingDataPlatform.github.io//docs/pravega/wire-protocol"><link data-react-helmet="true" rel="alternate" href="https://StreamingDataPlatform.github.io//docs/pravega/wire-protocol" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://StreamingDataPlatform.github.io//docs/pravega/wire-protocol" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.b0af8e75.css">
<link rel="preload" href="/docs/assets/js/styles.cd81ec63.js" as="script">
<link rel="preload" href="/docs/assets/js/runtime~main.e369d990.js" as="script">
<link rel="preload" href="/docs/assets/js/main.b22ffc5e.js" as="script">
<link rel="preload" href="/docs/assets/js/1.5eb17626.js" as="script">
<link rel="preload" href="/docs/assets/js/2.ad5efe07.js" as="script">
<link rel="preload" href="/docs/assets/js/76.03c2d757.js" as="script">
<link rel="preload" href="/docs/assets/js/935f2afb.f95ba67b.js" as="script">
<link rel="preload" href="/docs/assets/js/17896441.a677c3f2.js" as="script">
<link rel="preload" href="/docs/assets/js/940ff64a.52157db1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.svg" alt="Dell Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.svg" alt="Dell Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/docs/">SDP Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/pravega/pravega" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.svg" alt="Dell Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.svg" alt="Dell Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">SDP Docs</a></li><li class="menu__list-item"><a href="https://github.com/pravega/pravega" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Streaming Data Platform</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/about">About</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Installation and Administration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/install/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/install/guide">Guide</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/troubleshooting/index">Overview</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Developer&#x27;s Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/developer-guide/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/developer-guide/guide">Guide</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Analytics</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Flink</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/analytics/flink/index">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Spark</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/analytics/spark/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/analytics/spark/deploying">Deploying</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/analytics/spark/troubleshooting">Troubleshooting</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Security Configuration Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/security-configuration/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/security-configuration/guide">Guide</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Pravega</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/index">Pravega Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Understanding Pravega</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/pravega-concepts">Pravega Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/terminology">Terminology</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/key-features">Pravega Key Features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/faq">Frequently Asked Questions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/segment-store-service">Pravega Segment Store Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/segment-containers">Segment Containers in a Pravega Cluster</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/controller-service">Pravega Controller Service</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/pravega/wire-protocol">Pravega Streaming Service Wire Protocol</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/state-synchronizer-design">State Synchronizer Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/reader-group-design">Reader Groups Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/watermarking">Watermarking</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Developing Pravega Applications</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/pravega-write-read-methods">Methods for Writing and Reading Pravega Streams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/javadoc">Java API Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/rest/restapis">Pravega Controller APIs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/connectors">Pravega Connectors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/basic-reader-and-writer">Basic Reader and Writer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/state-synchronizer">State Synchronizer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/transactions">Transactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/streamcuts">StreamCuts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Running Pravega</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/deployment/deployment">Pravega Deployment Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/deployment/manual-install">Manual Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/deployment/kubernetes-install">Deploying in Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/deployment/docker-swarm">Deploying in a Docker Swarm</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/deployment/dcos-install">Deploying on DC/OS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/deployment/aws-install">Running on AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/metrics">Pravega Metrics</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Pravega Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/auth/auth-plugin">Implementation of Pravega Authentication/Authorization Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/auth/client-auth">Client Auth Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/security/pravega-security-authorization-authentication">TLS, Authorization, Authentication - Enabling encryption, authorization and authentication features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/security/pravega-security-configurations">Pravega Security Configurations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/security/pravega-security-encryption">Pravega Encryption</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/security/securing-distributed-mode-cluster">Setting Up Security for a Distributed Mode Cluster</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Contributing to Pravega</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/contributing">Contributing to Pravega</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/roadmap">Pravega Roadmap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/join-community">Join the Pravega Community</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Connectors</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Flink</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/quickstart">Quick Start</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/streaming">Streaming</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/batch">Batch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/table-api">Table API</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/configurations">Configurations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/serialization">Serialization</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Spark</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/spark-connectors/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/spark-connectors/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/spark-connectors/samples">Samples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/spark-connectors/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/spark-connectors/build-connector">Building the Connector</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/spark-connectors/limitations">Limitations</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/pravega/nifi-pravega" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">NiFi</a></li><li class="menu__list-item"><a href="https://github.com/pravega?q=logstash" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Logstash</a></li><li class="menu__list-item"><a href="https://github.com/pravega/boomi-connector" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Boomi</a></li><li class="menu__list-item"><a href="https://github.com/pravega/kafka-adapter" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Kafka Adapter</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Pravega Streaming Service Wire Protocol</h1></header><div class="markdown"><p>This page describes the proposed Wire Protocol for the Streaming Service. See <a href="https://pravega.io/docs/latest/pravega-concepts" target="_blank" rel="noopener noreferrer">Pravega Concepts</a> for more information.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="protocol"></a>Protocol<a class="hash-link" href="#protocol" title="Direct link to heading">#</a></h1><p>Data is sent over the wire in self-contained &quot;messages&quot; that are either &quot;requests&quot; (messages sent from the client to the server) or &quot;replies&quot; (responses sent from the server to the client).</p><p>All the requests and replies have 8 byte headers with two fields (all data is written in <strong>BigEndian</strong> format).</p><ul><li><strong>Message Type</strong>: An Integer (4 bytes) identifies the message type and determines the subsequent fields. (Note that the protocol can be extended by adding new types.)</li><li><strong>Length</strong>:  An Integer (4 bytes) (Messages should be less than 2<sup>24</sup>, but the upper bits remain zero). Payload size of the message (possibly zero, indicating there is no data). The remainder of the fields are specific to the type of the message. A few important messages are listed below.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="protocol-primitive-types"></a>Protocol Primitive Types<a class="hash-link" href="#protocol-primitive-types" title="Direct link to heading">#</a></h2><p>The protocol is built out of the following primitive types.</p><table><thead><tr><th><strong>Type</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td>BOOLEAN (1 byte)</td><td>Values 0 and 1 are used to represent <em>False</em> and <em>True</em> respectively. When reading a boolean value, any non-zero value is considered true.</td></tr><tr><td>STRING (2 bytes)</td><td>A sequence of characters. The first 2 bytes are used to indicate the byte length of the UTF-8 encoded character sequence, which is non-negative. This is followed by the UTF-8 encoding of the string.</td></tr><tr><td>VARLONG (8 bytes)</td><td>An Integer between -2<sup>63</sup> and 2<sup>63</sup>-1 inclusive. Encoding follows the variable-length zig-zag encoding from <a href="https://developers.google.com/protocol-buffers/" target="_blank" rel="noopener noreferrer">Google Protocol Buffers</a>.</td></tr><tr><td>INT (4 bytes)</td><td>An Integer between -2<sup>31</sup> and 2<sup>31</sup>-1 inclusive.</td></tr><tr><td>UUID (16 bytes)</td><td>Universally Unique Identifiers (UUID) as defined by RFC 4122, ISO/IEC 9834-8:2005, and related standards. It can be used as a global unique 128-bit identifier.</td></tr></tbody></table><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reading"></a>Reading<a class="hash-link" href="#reading" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="read-segment---request"></a>Read Segment - Request<a class="hash-link" href="#read-segment---request" title="Direct link to heading">#</a></h2><table><thead><tr><th><strong>Field</strong></th><th><strong>Datatype</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>Segment</code></td><td>String</td><td>The Stream Segment that was read.</td></tr><tr><td><code>Offset</code></td><td>Long</td><td>The <code>Offset</code> in the Stream Segment to read from.</td></tr><tr><td><code>suggestedLength</code> of Reply</td><td>Integer</td><td>The clients can request for the required length to the server (but the server may allot a different number of bytes.</td></tr><tr><td><code>delegationToken</code></td><td>String</td><td>This was added to perform <em>auth</em>. It is an opaque-to-the-client token provided by the Controller that says it&#x27;s allowed to make this call.</td></tr><tr><td><code>RequestId</code></td><td>Long</td><td>The client-generated <em>ID</em> that identifies a client request.</td></tr></tbody></table><p>More information on <code>Segment</code> Request messages like <code>MergeSegment</code>, <code>SealSegment</code>, <code>TruncateSegment</code> and <code>DeleteSegment</code>, can be found <a href="https://github.com/pravega/pravega/blob/master/shared/protocol/src/main/java/io/pravega/shared/protocol/netty/WireCommands.java" target="_blank" rel="noopener noreferrer">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="segment-read---reply"></a>Segment Read - Reply<a class="hash-link" href="#segment-read---reply" title="Direct link to heading">#</a></h2><table><thead><tr><th><strong>Field</strong></th><th><strong>Datatype</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>Segment</code></td><td>String</td><td>This Segment indicates the Stream Segment that was read.</td></tr><tr><td><code>Offset</code></td><td>Long</td><td>The <code>Offset</code> in the Stream Segment to read from.</td></tr><tr><td><code>Tail</code></td><td>Boolean</td><td>If the read reached the tail of the Stream Segment.</td></tr><tr><td><code>EndOfSegment</code></td><td>Boolean</td><td>If the read reached the end of the Stream Segment.</td></tr><tr><td><code>Data</code></td><td>Binary</td><td>Remaining length in the message.</td></tr><tr><td><code>RequestId</code></td><td>Long</td><td>The client-generated <em>ID</em> that identifies a client request.</td></tr></tbody></table><p>The client requests to read from a particular Segment at a particular <code>Offset</code>. It then receives one or more replies in the form of <code>SegmentRead</code> messages. These contain the data they requested (assuming it exists). The server may decide transferring to the client more or less data than it was asked for, splitting that data in a suitable number of reply messages.</p><p>More information on <code>Segment</code> Reply messages like <code>SegmentIsSealed</code>,<code>SegmentIsTruncated</code>, <code>SegmentAlreadyExists</code>,<code>NoSuchSegment</code> and <code>TableSegmentNotEmpty</code>, can be found <a href="https://github.com/pravega/pravega/blob/master/shared/protocol/src/main/java/io/pravega/shared/protocol/netty/WireCommands.java" target="_blank" rel="noopener noreferrer">here</a>.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="appending"></a>Appending<a class="hash-link" href="#appending" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setup-append---request"></a>Setup Append - Request<a class="hash-link" href="#setup-append---request" title="Direct link to heading">#</a></h2><table><thead><tr><th><strong>Field</strong></th><th><strong>Datatype</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>RequestId</code></td><td>Long</td><td>The client-generated <em>ID</em> that identifies a client request.</td></tr><tr><td><code>writerId</code></td><td>UUID</td><td>Identifies the requesting appender.</td></tr><tr><td><code>Segment</code></td><td>String</td><td>This Segment indicates the Stream Segment that was read.</td></tr><tr><td><code>delegationToken</code></td><td>String</td><td>This was added to perform <em>auth</em>. It is an opaque-to-the-client token provided by the Controller that says it&#x27;s allowed to make this call.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="append-setup---reply"></a>AppendÂ SetupÂ - Reply<a class="hash-link" href="#append-setup---reply" title="Direct link to heading">#</a></h2><table><thead><tr><th><strong>Field</strong></th><th><strong>Datatype</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>RequestId</code></td><td>Long</td><td>The client-generated <em>ID</em> that identifies a client request.</td></tr><tr><td><code>Segment</code></td><td>String</td><td>This Segment indicates the Stream Segment to append to.</td></tr><tr><td><code>writerId</code></td><td>UUID</td><td>Identifies the requesting appender. This ID is used to identify the Segment for which an AppendBlock is destined.</td></tr><tr><td><code>lastEventNumber</code></td><td>Long</td><td>Specifies the last event number in the Stream.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="appendblock---request"></a>AppendBlock - Request<a class="hash-link" href="#appendblock---request" title="Direct link to heading">#</a></h2><table><thead><tr><th><strong>Field</strong></th><th><strong>Datatype</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>writerId</code></td><td>UUID</td><td>Identifies the requesting appender.</td></tr><tr><td><code>Data</code></td><td>Binary</td><td>This holds the contents of the block.</td></tr><tr><td><code>RequestId</code></td><td>Long</td><td>The client-generated <em>ID</em> that identifies a client request.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="appendblockend---request"></a>AppendBlockEnd - Request<a class="hash-link" href="#appendblockend---request" title="Direct link to heading">#</a></h2><table><thead><tr><th><strong>Field</strong></th><th><strong>Datatype</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>writerId</code></td><td>UUID</td><td>Identifies the requesting appender.</td></tr><tr><td><code>sizeOfWholeEvents</code></td><td>Integer</td><td>The total number of bytes in this block (starting from the beginning) that is composed of whole (meaning non-partial) events.</td></tr><tr><td><code>Data</code></td><td>Binary</td><td>This holds the contents of the block.</td></tr><tr><td><code>numEvents</code></td><td>Integer</td><td>Specifies the current number of events.</td></tr><tr><td><code>lastEventNumber</code></td><td>Long</td><td>Specifies the value of last event number in the Stream.</td></tr><tr><td><code>RequestId</code></td><td>Long</td><td>The client-generated <em>ID</em> that identifies a client request.</td></tr></tbody></table><p>The <code>ApppendBlockEnd</code> has a <code>sizeOfWholeEvents</code> to allow the append block to be less than full. This allows the client to begin writing a block before it has a large number of events. This avoids the need to buffer up events in the client and allows for lower latency.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="partial-event---requestreply"></a>Partial Event - Request/Reply<a class="hash-link" href="#partial-event---requestreply" title="Direct link to heading">#</a></h2><ul><li><strong>Data</strong>: A Partial Event is an Event at the end of an Append block that did not fully fit in the Append block. The remainder of the Event will be available in the <code>AppendBlockEnd</code>.</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="event---request"></a>Event - Request<a class="hash-link" href="#event---request" title="Direct link to heading">#</a></h2><table><thead><tr><th><strong>Field</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>Data</code></td><td>Specifies the Event&#x27;s data (only valid inside the block).</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="data-appended---reply"></a>Data Appended - Reply<a class="hash-link" href="#data-appended---reply" title="Direct link to heading">#</a></h2><table><thead><tr><th><strong>Field</strong></th><th><strong>Datatype</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>writerId</code></td><td>UUID</td><td>Identifies the requesting appender.</td></tr><tr><td><code>eventNumber</code></td><td>Long</td><td>This matches the <code>lastEventNumber</code> in the append block.</td></tr><tr><td><code>previousEventNumber</code></td><td>Long</td><td>This is the previous value of <code>eventNumber</code> that was returned in the last <code>DataAppeneded</code>.</td></tr><tr><td><code>RequestId</code></td><td>Long</td><td>The client-generated <em>ID</em> that identifies a client request.</td></tr></tbody></table><p>When appending a client:</p><ul><li>Establishes a connection to the host chosen by it.</li><li>Sends a &quot;Setup Append&quot; request.</li><li>Waits for the &quot;Append Setup&quot; reply.</li></ul><p>After receiving the &quot;Append Setup&quot; reply, it performs the following:</p><ul><li>Send a <code>AppendBlock</code> request.</li><li>Send as many Events that can fit in the block.</li><li>Send an <code>AppendBlockEnd</code> request.</li></ul><p>While this is happening, the server will be periodically sending it <code>DataAppended</code> replies acking messages. Note that there can be multiple &quot;Appends Setup&quot; for a given TCP connection. This allows a client to share a connection when producing to multiple Segments.</p><p>A client can optimize its appending by specifying a large value in it&#x27;s <code>AppendBlock</code> message, as the events inside of the block do not need to be processed individually.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="segment-attribute"></a>Segment Attribute<a class="hash-link" href="#segment-attribute" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="getsegmentattribute---request"></a>GetSegmentAttribute - Request<a class="hash-link" href="#getsegmentattribute---request" title="Direct link to heading">#</a></h2><table><thead><tr><th><strong>Field</strong></th><th><strong>Datatype</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>RequestId</code></td><td>Long</td><td>The client-generated <em>ID</em> that identifies a client request.</td></tr><tr><td><code>SegmentName</code></td><td>String</td><td>The Segment to retrieve the attribute from.</td></tr><tr><td><code>attributeId</code></td><td>UUID</td><td>The attribute to retrieve.</td></tr><tr><td><code>delegationToken</code></td><td>String</td><td>This was added to perform <em>auth</em>. It is an opaque-to-the-client token provided by the Controller that says it&#x27;s allowed to make this call.</td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="segmentatrribute---reply"></a>SegmentAtrribute - Reply<a class="hash-link" href="#segmentatrribute---reply" title="Direct link to heading">#</a></h2><table><thead><tr><th><strong>Field</strong></th><th><strong>Datatype</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>RequestId</code></td><td>Long</td><td>The client-generated <em>ID</em> that identifies a client request.</td></tr><tr><td><code>Value</code></td><td>Long</td><td>The value of the attribute.</td></tr></tbody></table><p>More information on <code>SegmentAttribute</code> Request message like <code>updateSegmentAttribute</code> and Reply message like <code>SegmentAttributeUpdate</code> can be found <a href="https://github.com/pravega/pravega/blob/master/shared/protocol/src/main/java/io/pravega/shared/protocol/netty/WireCommands.java" target="_blank" rel="noopener noreferrer">here</a>.</p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tablesegment"></a>TableSegment<a class="hash-link" href="#tablesegment" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="readtable---request"></a>ReadTable - Request<a class="hash-link" href="#readtable---request" title="Direct link to heading">#</a></h2><table><thead><tr><th><strong>Field</strong></th><th><strong>Datatype</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>RequestId</code></td><td>Long</td><td>The client-generated <em>ID</em> that identifies a client request.</td></tr><tr><td><code>Segment</code></td><td>String</td><td>The Stream Segment that was read.</td></tr><tr><td><code>delegationToken</code></td><td>String</td><td>This was added to perform <em>auth</em>. It is an opaque-to-the-client token provided by the Controller that says it&#x27;s allowed to make this call.</td></tr><tr><td><code>keys</code></td><td>List&lt;TableKey&gt;</td><td>The version of the key is always set to <code>io.pravega.segmentstore.contracts.tables.TableKey.NO_VERSION</code>.</td></tr></tbody></table><p>More information on <code>TableSegments</code> Request messages like <code>MergeTableSegments</code>, <code>SealTableSegment</code>, <code>DeleteTableSegment</code>, <code>UpdateTableEntries</code>, <code>RemoveTableKeys</code>, <code>ReadTableKeys</code> and <code>ReadTableEntries</code> can be found <a href="https://github.com/pravega/pravega/blob/master/shared/protocol/src/main/java/io/pravega/shared/protocol/netty/WireCommands.java" target="_blank" rel="noopener noreferrer">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="tableread---reply"></a>TableRead - Reply<a class="hash-link" href="#tableread---reply" title="Direct link to heading">#</a></h2><table><thead><tr><th><strong>Field</strong></th><th><strong>Datatype</strong></th><th><strong>Description</strong></th></tr></thead><tbody><tr><td><code>RequestId</code></td><td>Long</td><td>The client-generated <em>ID</em> that identifies a client request.</td></tr><tr><td><code>Segment</code></td><td>String</td><td>The Stream Segment that was read.</td></tr><tr><td><code>Entries</code></td><td>TableEntries</td><td>The entries of the Table that was read.</td></tr></tbody></table><p>More information on <code>TableSegments</code> Reply messages like <code>TableEntriesUpdated</code>, <code>TableKeysRemoved</code>, <code>TableKeysRead</code> and <code>TableEntriesRead</code> can be found <a href="https://github.com/pravega/pravega/blob/master/shared/protocol/src/main/java/io/pravega/shared/protocol/netty/WireCommands.java" target="_blank" rel="noopener noreferrer">here</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/claudiofahey/pravega/edit/docusaurus/documentation/src/docs/wire-protocol.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/pravega/controller-service"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Pravega Controller Service</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/pravega/state-synchronizer-design"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">State Synchronizer Design Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#protocol-primitive-types" class="table-of-contents__link">Protocol Primitive Types</a></li><li><a href="#read-segment---request" class="table-of-contents__link">Read Segment - Request</a></li><li><a href="#segment-read---reply" class="table-of-contents__link">Segment Read - Reply</a></li><li><a href="#setup-append---request" class="table-of-contents__link">Setup Append - Request</a></li><li><a href="#append-setup---reply" class="table-of-contents__link">AppendÂ SetupÂ - Reply</a></li><li><a href="#appendblock---request" class="table-of-contents__link">AppendBlock - Request</a></li><li><a href="#appendblockend---request" class="table-of-contents__link">AppendBlockEnd - Request</a></li><li><a href="#partial-event---requestreply" class="table-of-contents__link">Partial Event - Request/Reply</a></li><li><a href="#event---request" class="table-of-contents__link">Event - Request</a></li><li><a href="#data-appended---reply" class="table-of-contents__link">Data Appended - Reply</a></li><li><a href="#getsegmentattribute---request" class="table-of-contents__link">GetSegmentAttribute - Request</a></li><li><a href="#segmentatrribute---reply" class="table-of-contents__link">SegmentAtrribute - Reply</a></li><li><a href="#readtable---request" class="table-of-contents__link">ReadTable - Request</a></li><li><a href="#tableread---reply" class="table-of-contents__link">TableRead - Reply</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">SDP Overview</a></li><li class="footer__item"><a href="https://www.dell.com/support/kbdoc/en-us/000124079/dell-emc-streaming-data-platform-infohub" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDP InfoHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/pravega" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/pravega" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/pravega" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://blog.pravega.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/pravega/pravega" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Dell</div></div></div></footer></div>
<script src="/docs/assets/js/styles.cd81ec63.js"></script>
<script src="/docs/assets/js/runtime~main.e369d990.js"></script>
<script src="/docs/assets/js/main.b22ffc5e.js"></script>
<script src="/docs/assets/js/1.5eb17626.js"></script>
<script src="/docs/assets/js/2.ad5efe07.js"></script>
<script src="/docs/assets/js/76.03c2d757.js"></script>
<script src="/docs/assets/js/935f2afb.f95ba67b.js"></script>
<script src="/docs/assets/js/17896441.a677c3f2.js"></script>
<script src="/docs/assets/js/940ff64a.52157db1.js"></script>
</body>
</html>