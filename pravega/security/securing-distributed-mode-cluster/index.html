<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.71">
<link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="Dell EMC Streaming Data Platform Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="Dell EMC Streaming Data Platform Blog Atom Feed"><title data-react-helmet="true">Setting Up Security for a Distributed Mode Cluster | Dell EMC Streaming Data Platform</title><meta data-react-helmet="true" property="og:url" content="https://StreamingDataPlatform.github.io//docs/pravega/security/securing-distributed-mode-cluster"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Setting Up Security for a Distributed Mode Cluster | Dell EMC Streaming Data Platform"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://StreamingDataPlatform.github.io//docs/pravega/security/securing-distributed-mode-cluster"><link data-react-helmet="true" rel="alternate" href="https://StreamingDataPlatform.github.io//docs/pravega/security/securing-distributed-mode-cluster" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://StreamingDataPlatform.github.io//docs/pravega/security/securing-distributed-mode-cluster" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.b0af8e75.css">
<link rel="preload" href="/docs/assets/js/styles.cd81ec63.js" as="script">
<link rel="preload" href="/docs/assets/js/runtime~main.e369d990.js" as="script">
<link rel="preload" href="/docs/assets/js/main.b22ffc5e.js" as="script">
<link rel="preload" href="/docs/assets/js/1.5eb17626.js" as="script">
<link rel="preload" href="/docs/assets/js/2.ad5efe07.js" as="script">
<link rel="preload" href="/docs/assets/js/76.03c2d757.js" as="script">
<link rel="preload" href="/docs/assets/js/935f2afb.f95ba67b.js" as="script">
<link rel="preload" href="/docs/assets/js/17896441.a677c3f2.js" as="script">
<link rel="preload" href="/docs/assets/js/ab940efd.040587a4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.svg" alt="Dell Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.svg" alt="Dell Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/docs/">SDP Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/pravega/pravega" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.svg" alt="Dell Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.svg" alt="Dell Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">SDP Docs</a></li><li class="menu__list-item"><a href="https://github.com/pravega/pravega" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Streaming Data Platform</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/about">About</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Installation and Administration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/install/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/install/guide">Guide</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/troubleshooting/index">Overview</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Developer&#x27;s Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/developer-guide/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/developer-guide/guide">Guide</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Analytics</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Flink</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/analytics/flink/index">Overview</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Spark</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/analytics/spark/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/analytics/spark/deploying">Deploying</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/analytics/spark/troubleshooting">Troubleshooting</a></li></ul></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Security Configuration Guide</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/security-configuration/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/sdp/security-configuration/guide">Guide</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Pravega</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/index">Pravega Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/getting-started">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Understanding Pravega</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/pravega-concepts">Pravega Concepts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/terminology">Terminology</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/key-features">Pravega Key Features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/faq">Frequently Asked Questions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/segment-store-service">Pravega Segment Store Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/segment-containers">Segment Containers in a Pravega Cluster</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/controller-service">Pravega Controller Service</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/wire-protocol">Pravega Streaming Service Wire Protocol</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/state-synchronizer-design">State Synchronizer Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/reader-group-design">Reader Groups Design</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/watermarking">Watermarking</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Developing Pravega Applications</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/pravega-write-read-methods">Methods for Writing and Reading Pravega Streams</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/javadoc">Java API Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/rest/restapis">Pravega Controller APIs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/connectors">Pravega Connectors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/basic-reader-and-writer">Basic Reader and Writer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/state-synchronizer">State Synchronizer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/transactions">Transactions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/streamcuts">StreamCuts</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Running Pravega</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/deployment/deployment">Pravega Deployment Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/deployment/manual-install">Manual Installation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/deployment/kubernetes-install">Deploying in Kubernetes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/deployment/docker-swarm">Deploying in a Docker Swarm</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/deployment/dcos-install">Deploying on DC/OS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/deployment/aws-install">Running on AWS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/metrics">Pravega Metrics</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Pravega Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/auth/auth-plugin">Implementation of Pravega Authentication/Authorization Plugin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/auth/client-auth">Client Auth Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/security/pravega-security-authorization-authentication">TLS, Authorization, Authentication - Enabling encryption, authorization and authentication features</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/security/pravega-security-configurations">Pravega Security Configurations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pravega/security/pravega-security-encryption">Pravega Encryption</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/pravega/security/securing-distributed-mode-cluster">Setting Up Security for a Distributed Mode Cluster</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Contributing to Pravega</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/contributing">Contributing to Pravega</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/roadmap">Pravega Roadmap</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pravega/join-community">Join the Pravega Community</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Connectors</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Flink</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/quickstart">Quick Start</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/streaming">Streaming</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/batch">Batch</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/table-api">Table API</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/metrics">Metrics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/configurations">Configurations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flink-connectors/serialization">Serialization</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Spark</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/spark-connectors/index">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/spark-connectors/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/spark-connectors/samples">Samples</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/spark-connectors/configuration">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/spark-connectors/build-connector">Building the Connector</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/spark-connectors/limitations">Limitations</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/pravega/nifi-pravega" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">NiFi</a></li><li class="menu__list-item"><a href="https://github.com/pravega?q=logstash" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Logstash</a></li><li class="menu__list-item"><a href="https://github.com/pravega/boomi-connector" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Boomi</a></li><li class="menu__list-item"><a href="https://github.com/pravega/kafka-adapter" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="-1">Kafka Adapter</a></li></ul></li></ul></div><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" role="img" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Setting Up Security for a Distributed Mode Cluster</h1></header><div class="markdown"><ul><li><a href="#introduction">Introduction</a></li><li><a href="#generating-certificates-and-other-tls-artifacts">Generating Certificates and Other TLS Artifacts</a></li><li><a href="#enabling-tls-and-auth-in-pravega">Enabling TLS and Auth in Pravega</a><ul><li><a href="#configuring-tls-and-auth-on-server-side">Configuring TLS and Auth on Server Side</a></li><li><a href="#configuring-tls-and-credentials-on-client-side">Configuring TLS and Credentials on Client Side</a><ul><li><a href="#server-hostname-verification">Server Hostname Verification</a></li></ul></li><li><a href="#having-tls-and-auth-take-effect">Having TLS and Auth Take Effect</a></li></ul></li><li><a href="#conclusion">Conclusion</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="introduction"></a>Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">#</a></h2><p>In the <a href="/docs/pravega/deployment/deployment#pravega-modes">distributed mode</a> of running a Pravega cluster, each service runs
separately on one or more processes, usually spread across multiple machines. The deployment options of this mode
include:</p><ol><li>A manual deployment in hardware or virtual machines</li><li>Containerized deployments of these types:<ul><li>A Kubernetes native application deployed using the Pravega Operator</li><li>A Docker Compose application deployment</li><li>A Docker Swarm based distributed deployment</li></ul></li></ol><p>Regardless of the deployment option used, setting up Transport Layer Security (TLS) and Pravega Auth (short for
authentication and authorization) are essential requirements of a secure Pravega deployment. TLS encrypts
client-server as well as internal communication server components. TLS also enables clients to authenticate
the services running on the server. Auth, on the other hand, enables the services to validate that the users accounts
used for accessing them have requisite access permissions. Pravega strongly recommends enabling both TLS and Auth in
production.</p><p>This document lists steps for enabling TLS and auth for manual deployments. Depending on the deployment option
used and your environment, you might need to modify the steps and commands to suit your specific needs and policies.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="generating-certificates-and-other-tls-artifacts"></a>Generating Certificates and Other TLS Artifacts<a class="hash-link" href="#generating-certificates-and-other-tls-artifacts" title="Direct link to heading">#</a></h2><p>At a high-level, setting up TLS in Pravega comprises of two distinct activities:</p><ol><li>Generating TLS Certificates, private Keys, keystore, truststore and other artifacts, which involves
steps that Pravega is oblivious to.</li><li>Enabling and configuring TLS in Pravega.</li></ol><p><a href="/docs/pravega/security/generating-tls-artifacts">Creating TLS Certificates, Keys and Other TLS Artifacts</a> explains how to perform the
first activity. The <a href="#enabling-tls-and-auth-in-pravega">next</a> section explains the second activity. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="enabling-tls-and-auth-in-pravega"></a>Enabling TLS and Auth in Pravega<a class="hash-link" href="#enabling-tls-and-auth-in-pravega" title="Direct link to heading">#</a></h2><p>The high-level steps for enabling TLS and Auth, are:</p><ol><li>Configuring TLS and auth on server side</li><li>Configuring TLS and credentials on client Side</li><li>Having TLS and auth take effect</li></ol><p>These steps are discussed in the following sub-sections.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configuring-tls-and-auth-on-server-side"></a>Configuring TLS and Auth on Server Side<a class="hash-link" href="#configuring-tls-and-auth-on-server-side" title="Direct link to heading">#</a></h3><p>You can configure the following services for TLS and Auth:</p><ol><li>Controller</li><li>Segment Store</li><li>Zookeeper (optional)</li><li>Bookkeeper (optional)</li></ol><p>For information about enabling TLS for Zookeeper and Bookeeper, refer to
their documentation here:</p><ul><li><a href="https://cwiki.apache.org/confluence/display/ZOOKEEPER/ZooKeeper+SSL+User+Guide" target="_blank" rel="noopener noreferrer">ZooKeeper SSL Guide</a></li><li><a href="https://bookkeeper.apache.org/docs/latest/security/tls/" target="_blank" rel="noopener noreferrer">BookKeeper - Encryption and Authentication using TLS</a></li></ul><p><strong>Controller</strong></p><p>Controller services can be configured in two different ways:</p><ol><li><p>By specifying the configuration parameter values directly in the <code>controller.config.properties</code> file. For example,</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">controller.security.tls.enable=true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">controller.security.tls.server.certificate.location=/etc/secrets/server-cert.crt</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>By specifying configuration parameters as JVM system properties when starting the Controller service instance. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"># Example: docker-compose.yml file</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">services:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   controller:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      environment:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          JAVA_OPTS:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             -dcontroller.security.tls.enable=true</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             -dcontroller.security.tls.server.certificate.location=...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   ...          </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ol><p>The following table lists the Controller service&#x27;s TLS and auth parameters as well as samples values, for quick reference.
For a detailed description of these parameters, refer to the
<a href="https://github.com/pravega/pravega/blob/master/documentation/src/docs/security/pravega-security-configurations.md" target="_blank" rel="noopener noreferrer">Pravega Security Configurations</a> document.</p><table><thead><tr><th align="center">Configuration Parameter</th><th align="left">Example Value</th></tr></thead><tbody><tr><td align="center"><code>controller.security.tls.enable</code></td><td align="left"><code>true</code></td></tr><tr><td align="center"><code>controller.security.tls.server.certificate.location</code></td><td align="left"><code>/etc/secrets/server-cert.crt</code></td></tr><tr><td align="center"><code>controller.security.tls.server.privateKey.location</code></td><td align="left"><code>/etc/secrets/server-key.key</code></td></tr><tr><td align="center"><code>controller.security.tls.trustStore.location</code></td><td align="left"><code>/etc/secrets/ca-cert.crt</code></td></tr><tr><td align="center"><code>controller.security.tls.server.keyStore.location</code></td><td align="left"><code>/etc/secrets/server.keystore.jks</code></td></tr><tr><td align="center"><code>controller.security.tls.server.keyStore.pwd.location</code></td><td align="left"><code>/etc/secrets/server.keystore.jks.password</code> <sup>1</sup></td></tr><tr><td align="center"><code>controller.zk.connect.security.enable</code></td><td align="left"><code>false</code> <sup>2</sup></td></tr><tr><td align="center"><code>controller.zk.connect.security.tls.trustStore.location</code></td><td align="left">Unspecified <sup>2</sup></td></tr><tr><td align="center"><code>controller.zk.connect.security.tls.trustStore.pwd.location</code></td><td align="left">Unspecified <sup>2</sup></td></tr><tr><td align="center"><code>controller.security.auth.enable</code></td><td align="left"><code>true</code></td></tr><tr><td align="center"><code>controller.security.pwdAuthHandler.accountsDb.location</code> <sup>3</sup></td><td align="left"><code>/etc/secrets/password-auth-handler.database</code></td></tr><tr><td align="center"><code>controller.security.auth.delegationToken.signingKey.basis</code></td><td align="left"><code>a-secret-value</code></td></tr></tbody></table><p> [1]: This and other <code>.password</code> files are text files containing the password for the corresponding store.</p><p> [2]: It is assumed here that Zookeeper TLS is disabled. You may enable it and specify the corresponding client-side
TLS configuration properties via the <code>controller.zk.*</code> properties.</p><p> [3]: This configuration property is required when using the default Password Auth Handler only.</p><p><strong>Segment Store</strong></p><p>Segment store supports security configuration via a properties file (<code>config.properties</code>) or JVM system properties. The table
below lists its TLS and auth parameters and sample values. For a detailed discription of these parameters refer to
<a href="https://github.com/pravega/pravega/blob/master/documentation/src/docs/security/pravega-security-configurations.md" target="_blank" rel="noopener noreferrer">Pravega Security Configurations</a> document.</p><table><thead><tr><th align="center">Configuration Parameter</th><th align="left">Example Value</th></tr></thead><tbody><tr><td align="center"><code>pravegaservice.security.tls.enable</code></td><td align="left"><code>true</code></td></tr><tr><td align="center"><code>pravegaservice.security.tls.server.certificate.location</code></td><td align="left"><code>/etc/secrets/server-cert.crt</code></td></tr><tr><td align="center"><code>pravegaservice.security.tls.certificate.autoReload.enable</code></td><td align="left"><code>false</code></td></tr><tr><td align="center"><code>pravegaservice.security.tls.server.privateKey.location</code></td><td align="left"><code>/etc/secrets/server-key.key</code></td></tr><tr><td align="center"><code>pravegaservice.zk.connect.security.enable</code></td><td align="left"><code>false</code> <sup>1</sup></td></tr><tr><td align="center"><code>pravegaservice.zk.connect.security.tls.trustStore.location</code></td><td align="left">Unspecified <sup>1</sup></td></tr><tr><td align="center"><code>pravegaservice.zk.connect.security.tls.trustStore.pwd.location</code></td><td align="left">Unspecified <sup>1</sup></td></tr><tr><td align="center"><code>autoScale.controller.connect.security.tls.enable</code></td><td align="left"><code>true</code></td></tr><tr><td align="center"><code>autoScale.controller.connect.security.tls.truststore.location</code></td><td align="left"><code>/etc/secrets/ca-cert.crt</code></td></tr><tr><td align="center"><code>autoScale.controller.connect.security.auth.enable</code></td><td align="left"><code>true</code></td></tr><tr><td align="center"><code>autoScale.security.auth.token.signingKey.basis</code></td><td align="left"><code>a-secret-value</code> <sup>2</sup></td></tr><tr><td align="center"><code>autoScale.controller.connect.security.tls.validateHostName.enable</code></td><td align="left"><code>true</code></td></tr><tr><td align="center"><code>pravega.client.auth.loadDynamic</code></td><td align="left"><code>false</code></td></tr><tr><td align="center"><code>pravega.client.auth.method</code></td><td align="left"><code>Basic</code></td></tr><tr><td align="center"><code>pravega.client.auth.token</code></td><td align="left">Base64-encoded value of &#x27;username:password&#x27; string</td></tr></tbody></table><p>[1]: The secret value you use here must match the same value used for other Controller and Segment Store services.</p><p>[2]: It is assumed here that Zookeeper TLS is disabled. You may enable it and specify the corresponding client-side TLS
configuration properties via these properties.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="configuring-tls-and-credentials-on-client-side"></a>Configuring TLS and Credentials on Client Side<a class="hash-link" href="#configuring-tls-and-credentials-on-client-side" title="Direct link to heading">#</a></h3><p>After enabling and configuring TLS and auth on the server-side services, it&#x27;s time for the clients&#x27; setup.</p><p>Clients can be made to trust the server&#x27;s certificates signed by custom CA&#x27;s using one of the following ways:</p><ol><li><p>Configure the client application to use the signing CA&#x27;s certificate as the truststore. Alternatively, use the
servers&#x27; certificate as the truststore. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ClientConfig clientConfig = ClientConfig.builder()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           .controllerURI(&quot;tls://&lt;dns-name-or-ip&gt;:9090&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           .trustStore(&quot;/etc/secrets/ca-cert.crt&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           .build();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Install the CA&#x27;s certificate in the Java system key store. </p></li><li><p>Create a custom truststore with the CA&#x27;s certificate and supply it to the Pravega client application,
via standard JVM system properties <code>javax.net.ssl.trustStore</code> and <code>javax.net.ssl.trustStorePassword</code>.</p></li></ol><p>For auth, client-side configuration depends on the <code>AuthHandler</code> implementation used. If your server is configured to
use the built-in Password Auth Handler that supports &quot;Basic&quot; authentication, you may supply the credentials as shown below.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ClientConfig clientConfig = ClientConfig.builder()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              .controllerURI(&quot;tls://&lt;dns-name-or-ip&gt;:9090&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              .trustStore(&quot;/etc/secrets/ca-cert.crt&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              .credentials(new DefaultCredentials(&quot;&lt;password&gt;&quot;, &quot;&lt;username&gt;&quot;))</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              .build();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="server-hostname-verification"></a>Server Hostname Verification<a class="hash-link" href="#server-hostname-verification" title="Direct link to heading">#</a></h4><p>For client&#x27;s server hostname verification to succeed during TLS handshake, the hostname/IP address it uses for accessing the
server must match one of the following in the server&#x27;s certificate:</p><ul><li>Common Name (<code>CN</code>) in the certificate&#x27;s <code>Subject</code> field</li><li>One of the <code>Subject Alternative Names</code> (SAN) field entries</li></ul><p>Even if the server listens on the loopback address <code>127.0.0.1</code> and its certificate is assigned to <code>localhost</code>, hostname
verification will fail if the client attempts to access the server via <code>127.0.0.1</code>. For the verification to pass,
the client must access the server using the hostname assigned on the certificate <code>localhost</code> and have a hosts file entry
that maps <code>localhost</code> to <code>127.0.0.1</code> (which is usually already there). </p><p>Similarly, if the server certificate is assigned to a non-routable hostname on the network (say, <code>controller01.pravega.io</code>),
you might need to add an IP address and DNS/host name mapping in the client&#x27;s operating system hosts file. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">10.243.221.34 controller01.pravega.io</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>If you are reusing preexisting certificate for development/testing on new hosts, you might need to disable hostname
verification. To do so, call <code>validateHostName(false)</code> of the ClientConfig builder, as shown below. Never disable
hostname verification in production.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly java"><div tabindex="0" class="prism-code language-java codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ClientConfig clientConfig = ClientConfig.builder()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              .controllerURI(&quot;tls://&lt;dns-name-or-ip&gt;:9090&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              .trustStore(&quot;/etc/secrets/ca-cert.crt&quot;)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              .validateHostName(false)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              .credentials(...)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">              .build();</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="having-tls-and-auth-take-effect"></a>Having TLS and Auth Take Effect<a class="hash-link" href="#having-tls-and-auth-take-effect" title="Direct link to heading">#</a></h3><p>Any changes to TLS and auth configuration parameters take effect only when the service starts. So, changing those
configurations require a restart of the services. The same is true for clients, as well.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>This document explained about how to enable security in a Pravega cluster running in distributed mode.
Specifically, how to perform the following actions were discussed:</p><ul><li>Generating a CA (if needed)</li><li>Generating server certificates and keys for Pravega services</li><li>Signing the generated certificates using the generated CA</li><li>Enabling and configuring TLS and auth on the server Side</li><li>Setting up the <code>ClientConfig</code> on the client side for communicating with a Pravega cluster running with TLS and auth enabled</li><li>Having TLS and auth take effect</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/claudiofahey/pravega/edit/docusaurus/documentation/src/docs/security/securing-distributed-mode-cluster.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/pravega/security/pravega-security-encryption"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Pravega Encryption</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/pravega/contributing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Contributing to Pravega Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link">Introduction</a></li><li><a href="#generating-certificates-and-other-tls-artifacts" class="table-of-contents__link">Generating Certificates and Other TLS Artifacts</a></li><li><a href="#enabling-tls-and-auth-in-pravega" class="table-of-contents__link">Enabling TLS and Auth in Pravega</a><ul><li><a href="#configuring-tls-and-auth-on-server-side" class="table-of-contents__link">Configuring TLS and Auth on Server Side</a></li><li><a href="#configuring-tls-and-credentials-on-client-side" class="table-of-contents__link">Configuring TLS and Credentials on Client Side</a></li><li><a href="#having-tls-and-auth-take-effect" class="table-of-contents__link">Having TLS and Auth Take Effect</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">SDP Overview</a></li><li class="footer__item"><a href="https://www.dell.com/support/kbdoc/en-us/000124079/dell-emc-streaming-data-platform-infohub" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDP InfoHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/pravega" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/pravega" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/pravega" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://blog.pravega.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/pravega/pravega" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Dell</div></div></div></footer></div>
<script src="/docs/assets/js/styles.cd81ec63.js"></script>
<script src="/docs/assets/js/runtime~main.e369d990.js"></script>
<script src="/docs/assets/js/main.b22ffc5e.js"></script>
<script src="/docs/assets/js/1.5eb17626.js"></script>
<script src="/docs/assets/js/2.ad5efe07.js"></script>
<script src="/docs/assets/js/76.03c2d757.js"></script>
<script src="/docs/assets/js/935f2afb.f95ba67b.js"></script>
<script src="/docs/assets/js/17896441.a677c3f2.js"></script>
<script src="/docs/assets/js/ab940efd.040587a4.js"></script>
</body>
</html>