<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.71">
<link rel="alternate" type="application/rss+xml" href="/docs/blog/rss.xml" title="Dell EMC Streaming Data Platform Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/docs/blog/atom.xml" title="Dell EMC Streaming Data Platform Blog Atom Feed"><title data-react-helmet="true">Creating TLS Certificates, Keys and Other TLS Artifacts | Dell EMC Streaming Data Platform</title><meta data-react-helmet="true" property="og:url" content="https://StreamingDataPlatform.github.io//docs/pravega/security/generating-tls-artifacts"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Creating TLS Certificates, Keys and Other TLS Artifacts | Dell EMC Streaming Data Platform"><meta data-react-helmet="true" name="description" content="&lt;!--"><meta data-react-helmet="true" property="og:description" content="&lt;!--"><link data-react-helmet="true" rel="shortcut icon" href="/docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://StreamingDataPlatform.github.io//docs/pravega/security/generating-tls-artifacts"><link data-react-helmet="true" rel="alternate" href="https://StreamingDataPlatform.github.io//docs/pravega/security/generating-tls-artifacts" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://StreamingDataPlatform.github.io//docs/pravega/security/generating-tls-artifacts" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.b0af8e75.css">
<link rel="preload" href="/docs/assets/js/styles.cd81ec63.js" as="script">
<link rel="preload" href="/docs/assets/js/runtime~main.e369d990.js" as="script">
<link rel="preload" href="/docs/assets/js/main.b22ffc5e.js" as="script">
<link rel="preload" href="/docs/assets/js/1.5eb17626.js" as="script">
<link rel="preload" href="/docs/assets/js/2.ad5efe07.js" as="script">
<link rel="preload" href="/docs/assets/js/76.03c2d757.js" as="script">
<link rel="preload" href="/docs/assets/js/935f2afb.f95ba67b.js" as="script">
<link rel="preload" href="/docs/assets/js/17896441.a677c3f2.js" as="script">
<link rel="preload" href="/docs/assets/js/55453b8f.285c6522.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.svg" alt="Dell Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.svg" alt="Dell Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/docs/">SDP Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/pravega/pravega" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/docs/"><img src="/docs/img/logo.svg" alt="Dell Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/docs/img/logo.svg" alt="Dell Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">SDP Docs</a></li><li class="menu__list-item"><a href="https://github.com/pravega/pravega" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Creating TLS Certificates, Keys and Other TLS Artifacts</h1></header><div class="markdown"><p>This document describes how to create TLS certificates, keys and other artifacts for the server components. The
generated CA certificate and Java truststore may also be used on client-side for validating the servers&#x27; certificates.</p><ul><li><a href="#overview">Overview</a></li><li><a href="#setting-up-a-certificate-authority-ca">Setting up a Certificate Authority (CA)</a></li><li><a href="#generate-tls-certificates-and-other-tls-artifacts-for-the-server">Generate TLS Certificates and Other TLS Artifacts for the Server</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p>A TLS server certificate is an X.509 digital certificate that binds the server&#x27;s identity (such as the server&#x27;s
DNS name or IP address or both) to the server&#x27;s public key. The public key is part of the public-private key pair used
for asymmetric encryption during the TLS handshake. </p><p>Each Controller and Segment Store service requires a pair of PEM-encoded TLS certificate and private key. Each
service also requires a PEM-encoded certificate of the CA that has signed the server certificates. Moreover, the
Controller REST interface requires its certificate and keys in Java JKS formats. We refer to all the required files
as TLS artifacts, henceforth. </p><p>While the TLS certificate is public, the corresponding key is private and must be kept protected (typically
in the server that uses the TLS certificate and the key). Each server should use its own set of TLS artifacts;
reusing certificates requires reusing private keys as well, and sharing private keys across multiple servers increases
the risk that they will be compromised.</p><p>Here are a few strategies for determining the sets of TLS artifacts required for a Pravega cluster:</p><ol><li><p><em>Use separate TLS artifacts for each host/machine or service</em>. </p><p>Manual deployments supports this and the other configurations listed below. This is the most secure option. </p></li><li><p><em>Use two sets of TLS artifacts - one for the Controllers and the other for the Segment Stores</em>. </p><p>In this case, each certificate is assigned to all the respective nodes (Controllers or Segment Stores) by specifying
the nodes&#x27; DNS names and/or IP addresses in the certificate&#x27;s
<a href="https://en.wikipedia.org/wiki/Subject_Alternative_Name" target="_blank" rel="noopener noreferrer">Subject Alternative Name (SAN)</a> field. Also, the server
certificates might need to be recreated to add DNS names and/or IP addresses of the new servers whenever the
Controllers or the Segment stores are scaled up.</p><p>Kubernetes and other forms of containerized deployments supports this configuration. </p></li><li><p><em>Use the same set for all Controllers and Segment Store services</em>. </p><p>In this case, the certificate must contain the DNS names and/or IP addresses of all the Controller and Segment Store
services. This is the least secure option. Also, the server certificate might need to be recreated to add DNS names
and/or IP addresses of the new servers whenever the Controllers or the Segment stores are scaled up.</p><p>All deployment options support this configuration.</p></li></ol><p>The chosen configuration determines the number of TLS artifacts sets required for a
Pravega cluster. Each set can be prepared using the process described later in this document under
<a href="#generate-tls-certificates-and-other-tls-artifacts-for-the-server">Generate TLS Certificates and Other TLS Artifacts for the Server</a>. </p><p>Another important consideration is whether you want to terminate TLS at an external infrastructural component like
reverse proxy, Kubernetes Ingress or a load balancer. If TLS is terminated at such an infrastructural component, instead
of Pravega services, you will need to generate TLS artifacts for those infrastructural components instead, using similar
steps described in this document; however, the exact steps may be slightly different and additional steps may be required to
ensure that other parts of the infrastructure can communicate with it. Refer to the respective platform vendor&#x27;s
documentation,
such as <a href="https://cloud.google.com/kubernetes-engine/docs/concepts/ingress" target="_blank" rel="noopener noreferrer">this</a> one from Google Kubernetes Engine,
for instructions.</p><p><strong>Before you Begin:</strong></p><p>The steps described in this document use OpenSSL and Java Keytool to generate TLS artifacts like certificates, keys,
Java keystores and Java truststores. Install OpenSSL and Java Development Kit (JDK) on the hosts where the artifacts
will be generated.</p><p><strong>Note:</strong></p><ul><li><p>The examples shown in this document use command line arguments to pass all inputs to the command. To pass
sensitive command arguments via prompts instead, just exclude the corresponding option (as shown in the second command
below). </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Passwords are passed as command line arguments.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -keystore server01.keystore.jks -alias server01 -validity </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">validity</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -genkey </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            -storepass </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">keystore-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -keypass </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">key-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            -dname </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">distinguished-name</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -ext </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">SAN</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">DNS:</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">hostname</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Passwords (and some other arguments) are to be entered interactively on the prompt.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -keystore server01.keystore.jks -alias server01 -genkey</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>A weak password <code>changeit</code> is used everywhere in this document for easier reading. Be sure to replace it with
a strong and separate password for each file.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setting-up-a-certificate-authority-ca"></a>Setting up a Certificate Authority (CA)<a class="hash-link" href="#setting-up-a-certificate-authority-ca" title="Direct link to heading">#</a></h2><p>If you are planning to use a public CA or an existing private/internal CA, you may skip
this part altogether and go directly to the <a href="#generate-tls-certificates-and-other-tls-artifacts-for-the-server">next section</a>.</p><p>Here, we&#x27;ll create a CA in the form of a public/private key pair and a self-signed certificate.
Later, we&#x27;ll use this CA certificate/key bundle to sign the servers&#x27; certificates.</p><ol><li><p>Generate a CA certificate and public/private key pair. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ openssl req -new -x509 -keyout </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ca-private-key-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -out </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ca-cert-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -days </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">validity-in-days</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         -subj </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;distinguished_name&gt;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         -passout pass:</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ca-private-key-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># In MinGW/MSYS, the same -subj argument will be:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># &quot;//C=US\ST=Washington\L=Seattle\O=Pravega\OU=CA\CN=Pravega-Stack-CA&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ openssl req -new -x509 -keyout ca-key.key -out ca-cert.crt -days </span><span class="token number" style="color:rgb(247, 140, 108)">365</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         -subj </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;/C=US/ST=Washington/L=Seattle/O=Pravega/OU=CA/CN=Pravega-Stack-CA&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">         -passout pass:changeit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The command above will generate the following two PEM-encoded files: </p><ul><li>A file <code>ca-key.key</code> containing the encrypted private key.</li><li>A file <code>ca-cert.crt</code> containing the CA certificate.</li></ul></li><li><p>Optionally, create a Java truststore containing the CA&#x27;s certificate. This may be used by client applications if
they configure the truststore using the <code>javax.net.ssl.trustStore</code> Java option. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -keystore </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">java-truststore-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -noprompt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -alias </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">trusted-cert-entry-alias</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -import -file </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ca-cert-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -storepass </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">java-truststore-file-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -keystore client.truststore.jks -noprompt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -alias caroot </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -import -file ca-cert.crt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -storepass changeit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Optionally, list the truststore&#x27;s contents and inspect the output to verify everything is in order. The output </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># should show a single entry with alias name `caroot` and entry type `trustedCertEntry`.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -list -v -keystore client.truststore.jks -storepass changeit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ol><p>At this point, the following CA and truststore artifacts should be ready:</p><table><thead><tr><th align="center">File</th><th align="left">Description</th><th align="left">Example command for inspecting the file&#x27;s Contents</th></tr></thead><tbody><tr><td align="center"><code>ca-cert.crt</code></td><td align="left">A PEM-encoded file containing the X.509 certificate of the CA</td><td align="left"><code>$ openssl x509 -in ca-cert.crt -text -noout</code></td></tr><tr><td align="center"><code>ca-key.key</code></td><td align="left">A PEM-encoded file containing the CA&#x27;s encrypted private key</td><td align="left"><code>$ openssl pkcs8 -inform PEM -in ca-key.key -topk8</code></td></tr><tr><td align="center"><code>client.truststore.jks</code></td><td align="left">A password-protected truststore file containing the CA&#x27;s certificate</td><td align="left"><code>$ keytool -list -v -keystore client.truststore.jks -storepass changeit</code></td></tr></tbody></table><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="generate-tls-certificates-and-other-tls-artifacts-for-the-server"></a>Generate TLS Certificates and Other TLS Artifacts for the Server<a class="hash-link" href="#generate-tls-certificates-and-other-tls-artifacts-for-the-server" title="Direct link to heading">#</a></h2><p>Here, we prepare a set of TLS artifacts that can be used by one or more nodes.  </p><p>We&#x27;ll use the CA created in the previous stage to sign the server certificate for demonstration, but in real usage you
may instead get it signed by an existing internal CA in your environment or a public CA.</p><p>The high-level steps involved in this stage are:</p><ol><li>Generate a set of server certificate and private key.</li><li>Generate a Certificate Signing Request (CSR) for the server certificate.</li><li>Submit the CSR to a CA and obtain a signed certificate.</li><li>Prepare a keystore containing the signed server certificate and the CA&#x27;s certificate.</li><li>Export the server certificate&#x27;s private key.</li></ol><p>Note that these steps will need to be repeated with different input for each set. We discussed the number of sets
required earlier in the <a href="#overview">Overview</a> section. </p><p>The above steps are described below: </p><ol><li><p>Generate a set of server certificate and private key.</p><p>The following command will generate a Java JKS keystore containing the following artifacts for the server:</p><ul><li>An X.509 certificate containing the public key identifying the server</li><li>A private key for the public/private key pair</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -storetype JKS -keystore </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">java-keystore-file-name</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -storepass </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">java-keystore-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        -genkey -keyalg </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">key-algorithm</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -keysize </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">key-size</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -keypass </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">private-key-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        -alias </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">alias</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -validity </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">validity</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        -dname </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;&lt;distinguished-name&gt;&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        -ext </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">SAN</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">dns:</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">hostname</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">,dns:</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">hostname</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">2</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain">,ip:</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ipaddress</span><span class="token operator file-descriptor important" style="color:rgb(137, 221, 255)">1</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Example: </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -storetype JKS -keystore server_unsigned.keystore.jks -storepass changeit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           -genkey -keyalg RSA -keysize </span><span class="token number" style="color:rgb(247, 140, 108)">2048</span><span class="token plain"> -keypass changeit</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           -alias server -validity </span><span class="token number" style="color:rgb(247, 140, 108)">365</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           -dname </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CN=server.pravega.io, OU=analytics, O=pravega, L=Seattle, ST=Washington, C=US&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">           -ext </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">SAN</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">dns:server1.pravega.io,dns:server2.pravega.io,ip:127.0.0.1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Optionally, verify the contents of the generated file</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -list -v -storetype JKS -keystore server_unsigned.keystore.jks -storepass changeit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Generate a Certificate Signing Request (CSR) for the server certificate.</p><p>It helps to think of a CSR as an application for getting a certificate signed by a trusted authority. </p><p>A CSR is typically generated on the same server/node that uses the certificate, so that the corresponding private key
doesn&#x27;t need to be moved anywhere else. In some other environments, CSRs are generated in a central server and the
resulting certificates are distributed to the services that need them.  </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -keystore </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">java-keystore-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -storepass </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">java-keystore-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -alias </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">alias</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -certreq -file </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">csr-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -storepass </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">java-keystore-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -keystore server_unsigned.keystore.jks -storepass changeit -alias server </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -certreq -file server.csr </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -ext </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">SAN</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">dns:server1.pravega.io,dns:server2.pravega.io,ip:127.0.0.1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Submit the CSR to a CA and obtain a signed certificate.</p><p>If you are using a public or internal CA service, follow that CA&#x27;s process for submitting the CSR and obtaining
a signed certificate. To use the custom CA generated using the steps mentioned <a href="#stage-1-setting-up-a-certificate-authority-ca">earlier</a> or an internal CA
certificate/key bundle, use the steps below:</p><p>First create a <code>server-csr.conf</code> file with the following contents. Replace <code>alt_names</code> with the server&#x27;s hostname/
IP address that Pravega will use to access the server. If the same certificate is used in multiple servers, add
hostnames/IP addresses of all the servers. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><div tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">[req]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">req_extensions = v3_req</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">prompt = no</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[v3_req]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">subjectAltName = @alt_names</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">[alt_names]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">DNS.1 = server1.pravega.io</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">DNS.2 = server2.pravega.io</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">IP.1 = 127.0.0.1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Now, have the CA sign the certificate:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ openssl x509 -req -CA </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ca-cert-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -CAkey </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ca-private-key-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"> </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        -in </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">csr-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -out </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">signed-server-cert-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        -days </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">validity</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -CAcreateserial -passin pass:</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">csr-file-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        -extfile server-csr.conf -extensions v3_req</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ openssl x509 -req -CA ca-cert.crt -CAkey ca-key.key </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     -in server.csr -out server-cert.crt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     -days </span><span class="token number" style="color:rgb(247, 140, 108)">365</span><span class="token plain"> -CAcreateserial -passin pass:changeit </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     -extfile server-csr.conf -extensions v3_req</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Optionally, check the contents of the signed certificate.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ openssl x509 -in server-cert.crt -text -noout</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Prepare a new keystore containing the signed server certificate and the CA&#x27;s certificate chain. </p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Import the CA certificate into a new keystore file.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -keystore </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">server-jks-keystore-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -alias </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ca-alias</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -noprompt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             -import -file </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">ca-cert-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -storepass </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">server-jks-keystore-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Import the signed server certificate into the keystore.</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -keystore </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">server-jks-keystore-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -alias </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">server-alias</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -noprompt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             -import -file </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">signed-server-cert-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -storepass </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">server-jks-keystore-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -keystore server.keystore.jks -alias CARoot -noprompt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -import -file ca-cert.crt -storepass changeit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -keystore server.keystore.jks -alias server -noprompt </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">             -import -file server-cert.crt -storepass changeit</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># Optionally, list the keystore and inspect the output</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -list -v -storepass changeit -keystore server.keystore.jks</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Export the server certificate&#x27;s private key. </p><p>This is a two-step process.</p><ul><li><p>First, convert the server&#x27;s keystore in <code>.jks</code> format into <code>.p12</code> format.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -importkeystore </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -srckeystore </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">server-jks-keystore-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -destkeystore </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">server-pkcs12-keystore-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -srcstoretype jks -deststoretype pkcs12 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -srcstorepass </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">server-jks-keystore-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -deststorepass </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">server-pkcs12-keystore</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ keytool -importkeystore </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -srckeystore server.keystore.jks </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -destkeystore server.keystore.p12 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -srcstoretype jks -deststoretype pkcs12 </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">          -srcstorepass changeit -deststorepass changeit</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li><li><p>Now, export the private key of the server into a <code>PEM</code> encoded file. Note that the generated <code>PEM</code> file is not protected
by a password. The key itself is password-protected, as we are using the <code>-nodes</code> flag. So, be sure
to protect it using operating system&#x27;s technical and procedural controls.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ openssl pkcs12 -in </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">server-pkcs12-keystore-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> -passin pass:</span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">key-password</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                 -nodes -out </span><span class="token operator" style="color:rgb(137, 221, 255)">&lt;</span><span class="token plain">server-key-file-path</span><span class="token operator" style="color:rgb(137, 221, 255)">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><div tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ openssl pkcs12 -in server.keystore.p12 -out server-key.key -passin pass:changeit -nodes</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div></li></ul></li></ol><p>Step 5 concludes this stage and we are now now set for installing the certificates and other TLS artifacts in Pravega.</p><p>The table below lists the key output of this stage. </p><table><thead><tr><th align="center">File</th><th align="center">Description</th><th align="left">Command for Inspecting the Contents</th></tr></thead><tbody><tr><td align="center"><code>server-cert.crt</code></td><td align="center">A PEM-encoded file containing the CA-signed X.509 server certificate</td><td align="left"><code>openssl x509 -in server-cert.crt -text -noout</code></td></tr><tr><td align="center"><code>server-key.key</code></td><td align="center">A PEM-encoded file containing the server&#x27;s encrypted private key</td><td align="left"><code>openssl pkcs8 -inform PEM -in server-key.key -topk8</code></td></tr><tr><td align="center"><code>server.keystore.jks</code></td><td align="center">A password-protected server keystore file in .jks format</td><td align="left"><code>keytool -list -v -keystore server.keystore.jks -storepass changeit</code></td></tr></tbody></table></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/claudiofahey/pravega/edit/docusaurus/documentation/src/docs/security/generating-tls-artifacts.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#setting-up-a-certificate-authority-ca" class="table-of-contents__link">Setting up a Certificate Authority (CA)</a></li><li><a href="#generate-tls-certificates-and-other-tls-artifacts-for-the-server" class="table-of-contents__link">Generate TLS Certificates and Other TLS Artifacts for the Server</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">SDP Overview</a></li><li class="footer__item"><a href="https://www.dell.com/support/kbdoc/en-us/000124079/dell-emc-streaming-data-platform-infohub" target="_blank" rel="noopener noreferrer" class="footer__link-item">SDP InfoHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/pravega" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/pravega" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/pravega" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://blog.pravega.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://github.com/pravega/pravega" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Dell</div></div></div></footer></div>
<script src="/docs/assets/js/styles.cd81ec63.js"></script>
<script src="/docs/assets/js/runtime~main.e369d990.js"></script>
<script src="/docs/assets/js/main.b22ffc5e.js"></script>
<script src="/docs/assets/js/1.5eb17626.js"></script>
<script src="/docs/assets/js/2.ad5efe07.js"></script>
<script src="/docs/assets/js/76.03c2d757.js"></script>
<script src="/docs/assets/js/935f2afb.f95ba67b.js"></script>
<script src="/docs/assets/js/17896441.a677c3f2.js"></script>
<script src="/docs/assets/js/55453b8f.285c6522.js"></script>
</body>
</html>